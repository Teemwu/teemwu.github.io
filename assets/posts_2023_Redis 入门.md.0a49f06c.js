import{_ as t,c as r,C as a,z as c,x as l,a as d,N as h,D as n,o as C}from"./chunks/framework.04c7c4c6.js";const B=JSON.parse('{"title":"Redis 入门","description":"","frontmatter":{"title":"Redis 入门","author":"teemwu","date":"2023/03/13 16:52","isPublished":true,"categories":["数据库"],"tags":["redis"],"wordCount":1717},"headers":[{"level":1,"title":"Redis 入门","slug":"redis-入门","link":"#redis-入门","children":[{"level":2,"title":"什么是 Redis","slug":"什么是-redis","link":"#什么是-redis","children":[]},{"level":2,"title":"Redis 中常见数据类型","slug":"redis-中常见数据类型","link":"#redis-中常见数据类型","children":[{"level":3,"title":"基本数据类型","slug":"基本数据类型","link":"#基本数据类型","children":[]},{"level":3,"title":"高级数据类型","slug":"高级数据类型","link":"#高级数据类型","children":[]}]},{"level":2,"title":"Redis 安装&使用","slug":"redis-安装-使用","link":"#redis-安装-使用","children":[{"level":3,"title":"通过第三方工具安装","slug":"通过第三方工具安装","link":"#通过第三方工具安装","children":[]},{"level":3,"title":"通过编译源码进行安装","slug":"通过编译源码进行安装","link":"#通过编译源码进行安装","children":[]}]}]}],"relativePath":"posts/2023/Redis 入门.md","lastUpdated":1679191435000}'),y={name:"posts/2023/Redis 入门.md"},u=l("h1",{id:"redis-入门",tabindex:"-1"},[d("Redis 入门 "),l("a",{class:"header-anchor",href:"#redis-入门","aria-hidden":"true"},"#")],-1),g=h(`<p>作为一个前端工程师，或许你没用过 Redis ，但应该都听说过它，下面让我们重头开始，快速地了解一下 Redis。</p><h2 id="什么是-redis" tabindex="-1">什么是 Redis <a class="header-anchor" href="#什么是-redis" aria-hidden="true">#</a></h2><p>Redis（Remote Dictionary Server） 是一种基于内存的数据存储系统，它是一种高性能的键值对存储数据库，也被称为缓存数据库。</p><p>其主要的优点有：</p><ol><li>快速：Redis 可以在内存中快速执行读写操作，因此速度非常快。Redis 的速度比传统的关系型数据库（如 MySQL）快几个数量级，这使得 Redis 成为需要快速读写大量数据的应用程序的首选解决方案。</li><li>支持多种数据结构：Redis 不仅支持简单的键值对存储，还支持多种数据结构，如字符串、哈希、列表、集合、有序集合等。这些数据结构可以满足不同的需求，例如可以使用哈希结构来存储用户信息，使用列表结构来存储日志数据。</li><li>持久化：Redis 可以通过将数据写入磁盘来实现数据持久化，这样即使 Redis 服务器崩溃或关闭，数据也可以在重新启动后恢复。</li><li>原子性：在 Redis 中，原子性是指一个操作要么全部执行成功，要么全部执行失败，不存在部分执行的情况。例如，当多个客户端同时对同一个键进行读写操作时，Redis 会依次处理每个操作，确保每个操作都是原子性的，避免了并发访问的问题。</li><li>高并发：Redis 支持多个客户端并发访问，因此可以满足高并发的需求。</li><li>可扩展性：Redis 可以通过集群方式实现横向扩展，从而支持大规模应用场景。</li><li>开源：Redis 是一款完全开源的软件（<a href="https://github.com/redis/redis/blob/unstable/COPYING" target="_blank" rel="noreferrer">BSD证书</a>），用户可以免费使用并修改源代码以适应自己的需求。</li></ol><h2 id="redis-中常见数据类型" tabindex="-1">Redis 中常见数据类型 <a class="header-anchor" href="#redis-中常见数据类型" aria-hidden="true">#</a></h2><h3 id="基本数据类型" tabindex="-1">基本数据类型 <a class="header-anchor" href="#基本数据类型" aria-hidden="true">#</a></h3><p>Redis 的基本数据类型有如下几种：</p><ol><li>字符串类型（string）：可以存储字符串、整数或浮点数等类型的值。</li><li>列表类型（list）：由一系列按照插入顺序排序的元素组成，可以在列表头部或尾部添加、删除元素。</li><li>集合类型（set）：由一系列无序且唯一的元素组成，支持添加、删除元素，并且可以进行交集、并集、差集等集合操作。</li><li>有序集合类型（sorted set）：与集合类型类似，但每个元素有一个分数（score）与之关联，可以按照分数排序。</li><li>哈希类型（hash）：由一系列键值对组成，支持添加、删除元素，并且可以获取、修改、查询键值对的值。</li></ol><h3 id="高级数据类型" tabindex="-1">高级数据类型 <a class="header-anchor" href="#高级数据类型" aria-hidden="true">#</a></h3><p>除了上述基本数据类型之外，Redis 还提供了一些高级数据类型，例如：</p><ol><li>布隆过滤器类型（Bloom Filter）：用于判断某个元素是否存在于一个集合中，具有高效查询和存储的特点。</li><li>地理空间类型（Geospatial）：用于存储地理位置信息，并支持按照地理距离查询附近的位置。</li><li>HyperLogLog 类型：用于处理基数计数（cardinality counting）问题，即统计一个集合中元素的个数，具有高效的存储和查询性能。</li></ol><p>更多数据类型可参考 <a href="https://redis.io/docs/data-types/" target="_blank" rel="noreferrer">官方文档</a>。</p><h2 id="redis-安装-使用" tabindex="-1">Redis 安装&amp;使用 <a class="header-anchor" href="#redis-安装-使用" aria-hidden="true">#</a></h2><h3 id="通过第三方工具安装" tabindex="-1">通过第三方工具安装 <a class="header-anchor" href="#通过第三方工具安装" aria-hidden="true">#</a></h3><p>由于笔者使用的是 macOS ，所以为了方便，就使用 <a href="https://brew.sh/" target="_blank" rel="noreferrer">Homebrew</a> 进行安装，如果你使用的是其它操作系统，或者其它第三方工具的话，建议直接跳到 <a href="#通过编译源码进行安装">通过编译源码进行安装</a> 章节进行观看，或者参考 <a href="https://redis.io/docs/getting-started/installation/" target="_blank" rel="noreferrer">官方的安装文档</a>，这里就不赘述了。</p><ol><li>通过 Homebrew 安装</li></ol><p>在终端执行以下命令安装 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>启动 Redis</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">services</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span></code></pre></div><p>注意：以上命令将启动 Redis 服务并将其设置为开启自启动，如果需要停止 Redis 服务，可执行以下命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">services</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>连接 Redis</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">redis-cli</span></span>
<span class="line"></span></code></pre></div><p>连接后终端会进入 Redis 的命令行操作区域，大概长这样子 <code>127.0.0.1:6379&gt; </code> 可进行一些常规操作，如果要退出可执行 <code>exit</code> 或者直接按 <code>Control + C</code> 。</p><ol start="4"><li>卸载 Redis</li></ol><p>为了流程完备，增加了卸载方法，如果不需要可跳过。</p><p>先停止 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">services</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span></code></pre></div><p>然后删除 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">uninstall</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"></span></code></pre></div><p>最后删除相关配置文件和数据：</p><ul><li>移除 Redis Sentinel 的配置文件</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/etc/redis-sentinel.conf</span></span>
<span class="line"></span></code></pre></div><ul><li>移除 Redis 配置文件</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/etc/redis.conf</span></span>
<span class="line"></span></code></pre></div><ul><li>移除 Redis 数据文件</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">rm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/var/db/redis</span></span>
<span class="line"></span></code></pre></div><h3 id="通过编译源码进行安装" tabindex="-1">通过编译源码进行安装 <a class="header-anchor" href="#通过编译源码进行安装" aria-hidden="true">#</a></h3><p>如果是个人或者开发环境中快速安装和管理 Redis，建议通过 HomeBrew 这些第三方工具进行安装，在生产环境中使用，最好还是通过发布的二进制包或者从源代码编译安装 Redis 比较稳妥。</p><ol><li>下载 Redis</li></ol><p>在 Redis 的 <a href="https://redis.io/download/" target="_blank" rel="noreferrer">官网</a> 中，下载最新的 Redis 压缩包，解压到任意位置，例如：<code>/usr/local/redis</code>。</p><p>或者通过 wget 工具直接下载：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://download.redis.io/redis-stable.tar.gz</span></span>
<span class="line"></span></code></pre></div><p>创建 Redis 存放目录：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/redis/</span></span>
<span class="line"></span></code></pre></div><p>通过 tar 解压到 <code>/usr/local/redis</code>：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-xzvf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-stable.tar.gz</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/redis/</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>编译安装 Redis</li></ol><p>在解压后的 Redis 目录下，执行以下命令编译 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">make</span></span>
<span class="line"></span></code></pre></div><p>编译完成后，执行以下命令安装 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>启动 Redis</li></ol><p>在终端中执行以下命令启动 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">redis-server</span></span>
<span class="line"></span></code></pre></div><p>如果要指定配置文件启动Redis，可以使用以下命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">redis-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/path/to/redis.conf</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>连接 Redis</li></ol><p>在另一个终端中执行以下命令连接 Redis：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">redis-cli</span></span>
<span class="line"></span></code></pre></div><ol start="5"><li>修改 Redis 配置文件</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis.conf</span></span>
<span class="line"></span></code></pre></div><ul><li>为了能在后台运行 Redis 服务，我将 <code>daemonize no</code> 改为 <code>daemonize yes</code></li><li>为了方便查看日志，<code>logfile &quot;&quot;</code> 改为 <code>logfile /usr/local/redis/redis-stable/log</code></li><li>为了安全起见，开启密码，将 <code># requirepass</code> 注释去掉，改为 <code>requirepass yourPassword</code></li></ul><p>保存配置后重新启动服务即可：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis.conf</span></span>
<span class="line"></span></code></pre></div><ol start="6"><li>Redis 基本操作</li></ol><p>连接 Redis 后，可以进行以下基本操作：</p><ul><li>设置键值对：<code>set key value</code></li><li>获取键值对：<code>get key</code></li><li>删除键值对：<code>del key</code></li><li>判断键是否存在：<code>exists key</code></li><li>获取所有键：<code>keys *</code></li><li>删除所有键值对：<code>flushall</code></li></ul><p>更多 Redis 命令可以参考 Redis 官网的文档：<a href="https://redis.io/commands" target="_blank" rel="noreferrer">https://redis.io/commands</a></p>`,71);function b(s,e,m,D,A,R){const i=n("articleMeta"),o=n("ClientOnly");return C(),r("div",null,[u,a(o,null,{default:c(()=>[a(i,{modelValue:s.$frontmatter,"onUpdate:modelValue":e[0]||(e[0]=p=>s.$frontmatter=p)},null,8,["modelValue"])]),_:1}),g])}const f=t(y,[["render",b]]);export{B as __pageData,f as default};
