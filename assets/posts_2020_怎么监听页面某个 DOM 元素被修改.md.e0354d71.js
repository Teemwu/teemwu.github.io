import{_ as r,c,a as n,w as F,b as o,d as y,e as i,r as e,o as D}from"./app.ada76534.js";const d="/assets/2020081410260.1c5d24d1.png",M=JSON.parse('{"title":"怎么监听页面某个 DOM 元素被修改","description":"","frontmatter":{"title":"怎么监听页面某个 DOM 元素被修改","author":"teemwu","date":"2020/08/14 10:26","isPublished":true,"categories":["Javascript"],"tags":["调试"],"wordCount":242},"headers":[{"level":1,"title":"怎么监听页面某个 DOM 元素被修改","slug":"怎么监听页面某个-dom-元素被修改","link":"#怎么监听页面某个-dom-元素被修改","children":[{"level":2,"title":"MutationObserver 监听 DOM 树的改变","slug":"mutationobserver-监听-dom-树的改变","link":"#mutationobserver-监听-dom-树的改变","children":[]},{"level":2,"title":"Chrome 设置断点进行监听","slug":"chrome-设置断点进行监听","link":"#chrome-设置断点进行监听","children":[]}]}],"relativePath":"posts/2020/怎么监听页面某个 DOM 元素被修改.md","lastUpdated":1677738745000}'),C={name:"posts/2020/怎么监听页面某个 DOM 元素被修改.md"},A=o("h1",{id:"怎么监听页面某个-dom-元素被修改",tabindex:"-1"},[y("怎么监听页面某个 DOM 元素被修改 "),o("a",{class:"header-anchor",href:"#怎么监听页面某个-dom-元素被修改","aria-hidden":"true"},"#")],-1),u=i(`<h2 id="mutationobserver-监听-dom-树的改变" tabindex="-1">MutationObserver 监听 DOM 树的改变 <a class="header-anchor" href="#mutationobserver-监听-dom-树的改变" aria-hidden="true">#</a></h2><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver" target="_blank" rel="noreferrer">MutationObserver</a> 接口提供了监视对DOM树所做更改的能力。它被设计为旧的Mutation Events功能的替代品，该功能是DOM3 Events规范的一部分。</p></blockquote><p>将下面代码加入到 <a href="https://www.tampermonkey.net/index.php" target="_blank" rel="noreferrer">Tampermonkey</a>，刷新所需监听元素页面，查看断点信息即可查找到对应调用方法。</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MutationObserver</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">mutations</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">observer</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your selector</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">observer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disconnect</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">MutationObserver</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">mutations</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">observer</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#F78C6C;">debugger</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">childList</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> subtree</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">observe</span><span style="color:#A6ACCD;">(document</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">childList</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">subtree</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="chrome-设置断点进行监听" tabindex="-1">Chrome 设置断点进行监听 <a class="header-anchor" href="#chrome-设置断点进行监听" aria-hidden="true">#</a></h2><p>选中需要监听 DOM 元素的父级元素，右击选中 <code>Break on =&gt; subtree moditfications</code>，断点打上后刷新页面即可。</p><p><img src="`+d+'" alt=""></p><ul><li>subtree modifications 监听当前元素子级元素变化</li><li>attribute modifications 监听当前元素属性变化</li><li>node removal 监听当前元素被移除</li></ul>',8);function m(s,a,_,h,b,v){const l=e("articleMeta"),t=e("ClientOnly");return D(),c("div",null,[A,n(t,null,{default:F(()=>[n(l,{modelValue:s.$frontmatter,"onUpdate:modelValue":a[0]||(a[0]=p=>s.$frontmatter=p)},null,8,["modelValue"])]),_:1}),u])}const O=r(C,[["render",m]]);export{M as __pageData,O as default};
