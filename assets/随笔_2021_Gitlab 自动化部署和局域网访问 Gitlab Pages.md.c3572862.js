import{_ as s,c as a,o as n,a as l}from"./app.b066a273.js";const e="/assets/2021030321540.aab37590.png",p="/assets/2021030321541.6f138e6a.png",t="/assets/2021030321542.25176d1b.png",i="/assets/2021030321543.791a787e.png",o="/assets/2021030321544.fc2aa20d.png",D=JSON.parse('{"title":"Gitlab \u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE Gitlab Pages","description":"","frontmatter":{"title":"Gitlab \u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE Gitlab Pages","author":"teemwu","date":"2021/03/03 21:54","isPublished":true,"categories":null,"tags":["gitlab"]},"headers":[{"level":1,"title":"Gitlab \u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE Gitlab Pages","slug":"gitlab-\u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE-gitlab-pages","link":"#gitlab-\u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE-gitlab-pages","children":[{"level":3,"title":"\u4ECB\u7ECD","slug":"\u4ECB\u7ECD","link":"#\u4ECB\u7ECD","children":[]},{"level":3,"title":"\u5B89\u88C5","slug":"\u5B89\u88C5","link":"#\u5B89\u88C5","children":[]},{"level":3,"title":"\u914D\u7F6E","slug":"\u914D\u7F6E","link":"#\u914D\u7F6E","children":[]}]}],"relativePath":"\u968F\u7B14/2021/Gitlab \u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE Gitlab Pages.md","lastUpdated":1664375998000}'),c={name:"\u968F\u7B14/2021/Gitlab \u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE Gitlab Pages.md"},r=l(`<h1 id="gitlab-\u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE-gitlab-pages" tabindex="-1">Gitlab \u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE Gitlab Pages <a class="header-anchor" href="#gitlab-\u81EA\u52A8\u5316\u90E8\u7F72\u548C\u5C40\u57DF\u7F51\u8BBF\u95EE-gitlab-pages" aria-hidden="true">#</a></h1><h3 id="\u4ECB\u7ECD" tabindex="-1">\u4ECB\u7ECD <a class="header-anchor" href="#\u4ECB\u7ECD" aria-hidden="true">#</a></h3><p>\u524D\u4E9B\u5929\u597D\u4E0D\u5BB9\u6613\u5347\u7EA7\u4E86 Gitlab\uFF0C\u7EC4\u4EF6\u5E93\u6587\u6863\u4E5F\u642D\u5EFA\u597D\u4E86\uFF0C\u53EA\u5DEE\u81EA\u52A8\u5316\u90E8\u7F72\u3002\u7531\u4E8E\u53EA\u662F\u60F3\u7ED9\u56E2\u961F\u5185\u90E8\u4F7F\u7528\uFF0C\u6240\u4EE5 gitlab \u90E8\u7F72\u65F6\u5E76\u6CA1\u6709\u4F7F\u7528\u57DF\u540D\uFF0C\u800C gitlab pages \u8BBF\u95EE\u5374\u9700\u8981\u586B\u5177\u4F53\u57DF\u540D\uFF0C\u5982\u679C\u586B IP \u7684\u8BDD\u662F\u8BBF\u95EE\u4E0D\u5230\u7684\u3002\u4E0B\u9762\u8BB0\u5F55\u4E0B\u7B80\u5355\u7684\u914D\u7F6E\u8FC7\u7A0B\u3002</p><h3 id="\u5B89\u88C5" tabindex="-1">\u5B89\u88C5 <a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a></h3><p>\u5B89\u88C5\u524D\u5148\u67E5\u770B\u662F\u5426\u5DF2\u7ECF\u5B89\u88C5\u4E86</p><div class="language-bat"><button class="copy"></button><span class="lang">bat</span><pre><code><span class="line"><span style="color:#A6ACCD;">gitlab-runner -v</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u5982\u679C\u8FD8\u6CA1\u5B89\u88C5\u7684\u8BDD\uFF0C\u53EF\u4EE5\u6839\u636E\u5B98\u65B9\u7684\u65B9\u6CD5\u8FDB\u884C\u5B89\u88C5</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># Download the binary for your system</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Give it permissions to execute</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo chmod +x /usr/local/bin/gitlab-runner</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Create a GitLab CI user</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo useradd --comment &#39;GitLab Runner&#39; --create-home gitlab-runner --shell /bin/bash</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># Install and run as service</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo gitlab-runner start</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="\u914D\u7F6E" tabindex="-1">\u914D\u7F6E <a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a></h3><p>\u4FEE\u6539 gitlab.rb \u7684\u914D\u7F6E\u6587\u4EF6</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">vi /etc/gitlab/gitlab.rb</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>gitlab pages \u7684\u57DF\u540D\u6211\u4EEC\u5047\u8BBE\u4E3A <code>http://kk-gitlab.cn</code>\uFF0C\u4F60\u4E5F\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u7684\u559C\u597D\u6765\u586B\uFF0C\u5207\u8BB0\u4E0D\u80FD\u662F IP \u5730\u5740\uFF01 \u4FEE\u6539\u5982\u4E0B</p><div class="language-ini"><button class="copy"></button><span class="lang">ini</span><pre><code><span class="line"><span style="color:#676E95;">##! Define to enable GitLab Pages</span></span>
<span class="line"><span style="color:#A6ACCD;">pages_external_url </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://kk-gitlab.cn</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">gitlab_pages[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">enable</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] = true</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u4FDD\u5B58\u540E\uFF0C\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4</p><div class="language-ini"><button class="copy"></button><span class="lang">ini</span><pre><code><span class="line"><span style="color:#676E95;"># \u5237\u65B0\u914D\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">gitlab-ctl reconfigure</span></span>
<span class="line"><span style="color:#676E95;"># \u91CD\u542F gitlab</span></span>
<span class="line"><span style="color:#A6ACCD;">gitlab-ctl restart</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u6211\u4EEC\u9700\u8981\u5148\u542F\u52A8 gitlab-runner \u670D\u52A1</p><div class="language-"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;">gitlab-runner start</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>\u542F\u52A8\u6210\u529F\u540E\u6211\u4EEC\u5C31\u9700\u8981\u5F00\u59CB\u6CE8\u518C runner \u4E86\uFF0C\u5177\u4F53\u6267\u884C\u547D\u4EE4\u53EF\u901A\u8FC7\u4E0B\u56FE\u6B65\u9AA4\u83B7\u5F97\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\u767B\u5F55\u7684\u8D26\u53F7\u5FC5\u987B\u4E3A\u7BA1\u7406\u8005\u8D26\u53F7\uFF0C\u5426\u5219\u770B\u4E0D\u5230\u90A3\u4E2A\u201C\u8BBE\u7F6E\u201D\u6309\u94AE <img src="`+e+`" alt=""> \u70B9\u51FB\u7B2C\u4E09\u6B65\uFF0C\u5F39\u51FA\u63D0\u793A\u7A97\uFF0C\u5728\u6700\u5E95\u4E0B\u627E\u5230\u7C7B\u4F3C\u4E0B\u9762\u7684\u8BED\u53E5\uFF0C\u590D\u5236\u5230\u670D\u52A1\u5668\u6267\u884C</p><div class="language-yaml"><button class="copy"></button><span class="lang">yaml</span><pre><code><span class="line"><span style="color:#C3E88D;">sudo gitlab-runner register --url http://xx.xx.xx.xxx/ --registration-token xxxxxxxxxxxxxx</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u6267\u884C\u540E\u9700\u8981\u4F60\u8F93\u5165\u4E00\u4E9B\u4FE1\u606F\uFF0C\u6B65\u9AA4\u5982\u4E0B</p><ol><li>\u8F93\u5165url\u5730\u5740\uFF08enter \u8DF3\u8FC7\uFF09</li><li>\u8F93\u5165token\uFF08enter \u8DF3\u8FC7\uFF09</li><li>\u8F93\u5165\u63CF\u8FF0\uFF0C\u4EFB\u610F\u5373\u53EF</li><li>\u8F93\u5165\u6807\u7B7E\uFF08enter \u8DF3\u8FC7\uFF09</li><li>\u9009\u62E9Runner executor\uFF0C\u8FD9\u91CC\u9009\u62E9 shell</li></ol><p>\u64CD\u4F5C\u5B8C\u540E\uFF0C\u5237\u65B0 Runners \u9875\u9762\uFF0C\u5C31\u53EF\u4EE5\u770B\u5230\u65B0\u6CE8\u518C\u7684 runner \u4E86</p><p><img src="`+p+'" alt=""></p><p>\u70B9\u51FB\u7F16\u8F91\uFF0C\u8FDB\u5165 runner \u7684\u8BBE\u7F6E\uFF0C\u8BBE\u7F6E\u4FDD\u5B58\u540E\uFF0C\u5728\u9875\u9762\u4E0B\u9762\u9009\u62E9\u8981\u5E94\u7528 runner \u7684\u9879\u76EE enable \u5373\u53EF</p><p><img src="'+t+`" alt=""></p><p>\u6211\u4EEC\u53EF\u4EE5\u68C0\u67E5\u4E0B runner \u7684\u72B6\u6001</p><div class="language-ini"><button class="copy"></button><span class="lang">ini</span><pre><code><span class="line"><span style="color:#A6ACCD;">gitlab-runner verify</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u6B64\u65F6\u6211\u4EEC\u91CD\u65B0\u63D0\u4EA4\u4EE3\u7801\u65F6\uFF0Cgitlab-runner \u5E94\u8BE5\u4F1A\u81EA\u52A8\u6267\u884C\u90E8\u7F72\u4E86\uFF0C\u90E8\u7F72\u6210\u529F\u5982\u4E0B\u56FE <img src="`+i+'" alt=""></p><p><img src="'+o+`" alt=""></p><p>\u5728\u4E0A\u56FE\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 gitlab-page \u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u76F4\u63A5\u8BBF\u95EE\u662F\u4E0D\u884C\u7684\uFF0C\u56E0\u4E3A\u662F\u6211\u4EEC\u4E71\u5199\u7684\u57DF\u540D\uFF0C\u6B64\u65F6\u6211\u4EEC\u5982\u679C\u53EA\u5728\u672C\u5730\u8BBF\u95EE\u7684\u8BDD\uFF0C\u53EF\u4EE5\u4FEE\u6539\u670D\u52A1\u5668\u548C\u672C\u5730\u673A\u5668\u7684 <a href="https://www.cnblogs.com/teemwu/p/10063842.html" target="_blank" rel="noreferrer">hosts</a>\uFF0C\u5C06 gitlab-page \u7684\u57DF\u540D\u6307\u5411\u6211\u4EEC\u670D\u52A1\u5668\u7684IP</p><div class="language-ini"><button class="copy"></button><span class="lang">ini</span><pre><code><span class="line"><span style="color:#676E95;"># \u670D\u52A1\u5668\u7AEF hosts \u589E\u52A0</span></span>
<span class="line"><span style="color:#A6ACCD;">127.0.0.1 gitlab-page \u7684\u5730\u5740</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><div class="language-ini"><button class="copy"></button><span class="lang">ini</span><pre><code><span class="line"><span style="color:#676E95;"># \u672C\u5730\u7684 hosts \u589E\u52A0</span></span>
<span class="line"><span style="color:#A6ACCD;">\u670D\u52A1\u5668IP  gitlab-page\u5730\u5740</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u81F3\u6B64\uFF0C\u672C\u5730\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u4F60\u7684 gitlab pages \u4E86\uFF0C\u5F53\u7136\u8FD9\u79CD\u65B9\u5F0F\u4E0D\u662F\u5F88\u597D\u7684\u5730\u65B9\u662F\u6BCF\u4E2A\u9879\u76EE\u90FD\u8981\u4FEE\u6539\u4E00\u6B21 hosts\uFF0C\u540E\u9762\u6216\u8BB8\u4F1A\u901A\u8FC7 nginx \u6765\u505A\u8F6C\u53D1\uFF0C\u5F85\u7EED\u3002\u3002</p>`,33),g=[r];function b(d,u,C,A,y,_){return n(),a("div",null,g)}const x=s(c,[["render",b]]);export{D as __pageData,x as default};
